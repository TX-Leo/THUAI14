# <center>3.0版本改进</center>
<center>2021年5月12日</center>
## 问题汇总
#### 染色效率问题
问题描述：
 - 在子弹足够且四周没有值得攻击的目标时，会重复攻击已经染色的区域，并且接近半数的子弹都浪费在了这上面。**<解决方案试验中>**
 - 染色区会出现小面积的“空缺”，角色容易被小面积的空缺堵住，不敢前进，又因为面积太小没能被己方攻击。**<解决方案试验中>**
 - 同上一条，容易被困在一小块己方阵地内，难以探索更宽广的地域。（但是如果放宽条件，可能导致回子弹效率变低——根据teamScore决定冒险程度）**<解决方案试验中>**


#### 攻击效率问题
问题描述：
 - 基于距离、移动速度和面朝方向的攻击目标点计算导致了攻击误差：敌人处于静止状态，但攻击目标直接基于移动计算，导致**攻击者与敌人距离越大，攻击偏差越大**的结果。**<解决方案试验中>**
 - 在**近距离攻击未能击杀敌人、呼叫攻击后火力未到达**后，角色未能及时逃离敌人视野，导致受到敌方贺岁师的集火攻击，造成重大伤亡。**<解决方案试验中>**
 - 贺岁师有接近猴博士的火力密度，**在近战中拥有堪比猴博士的攻击能力**，但是没有攻击敌人的设计。
 - 猴博士在“Explore mode”中，于敌方出生点附近击杀1~2名敌人后，子弹已基本耗尽，但并未回到己方阵地补充子弹，而是在没有四单状态下据需探索地图，在初期失去优势。**<解决方案试验中>**


#### 道具分配问题
**<解决方案试验中>**


## 解决方案
#### 染色空缺
首先在染色感知的层面，当前采取的是每一步100个单位，一共推进10个次，衰减率为0.9.这样，实际的考虑范围最多只有一格。  
如果对限制进行放宽，可能导致的后果就是：在解放区的边缘振动，最终只有一半的时间在有效地回子弹，浪费了宝贵的时间。不过，1个cell过于保守是事实。**<改为2个cell>**  
这样做杯水车薪是显然的，最重要的，还是要把空位填上。原有的算法是：搜寻周围的地图卷积值，寻找符合：
 - 周围没有被刚打过
 - 卷积值满足要求
 - 是个空位

这三个条件的cell。**这时候可以加上对自身坐标卷积值的特殊判断，即CRITECAL_COLOR_VALUE不是一个常数，而是一个与目标点与自身距离有关的量。对于自身点，这个量是1。**这个方案可以很好解决贺岁师的问题，但是对于猴博士却并不是一个完美的解决方案：这意味着密集的呼叫以及可能的子弹浪费。不能为了一个小瑕疵就破坏了大局。  
对于猴博士，如果在狭窄入口处来回振荡

